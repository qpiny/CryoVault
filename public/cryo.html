<!DOCTYPE html>

<html>
<head>
<title>CryoVault</title>
<link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />
<link rel="stylesheet" href="stylesheets/cryo.css" type="text/css" />
<script type="text/javascript" src="scripts/gettheme.js"></script>
<script type="text/javascript" src="javascripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jqwidgets/jqxcore.js"></script>
<script type="text/javascript" src="jqwidgets/jqxdockpanel.js"></script>
<script type="text/javascript" src="jqwidgets/jqxtree.js"></script>
<script type="text/javascript" src="jqwidgets/jqxbuttons.js"></script>
<script type="text/javascript" src="jqwidgets/jqxexpander.js"></script>
<script type="text/javascript" src="jqwidgets/jqxscrollbar.js"></script>
<script type="text/javascript" src="jqwidgets/jqxpanel.js"></script>
<script type="text/javascript" src="jqwidgets/jqxinput.js"></script>
<script type="text/javascript" src="jqwidgets/jqxtooltip.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		var tree = $('#tree');
		var form = $('#myForm');
		var input = $('#myInput');
		
		
		var theme = $.data(document.body, 'theme');
		if (theme == null || theme == undefined)
			theme = '';

		$('#log').jqxPanel({
			height: '200px',
			width: '100%',
			autoUpdate: true,
			theme: theme
		});
		
		input.jqxInput({
			width: 100,
			placeHolder: "old value"
		});
		form.hide();
		input.bind('blur', function() {
			form.hide();
		});
		form.bind('submit', function() {
			$('#log').jqxPanel('append', '<div style="white-space: nowrap">value=' + input.val() + '</div>');
			form.hide();
			tree.jqxTree('selectItem', null);
		});
		
		tree.jqxTree({
			theme: theme,
			height: '400',
			width: '300',
		});
		
		tree.jqxTree('addTo', {
			html: $('<div><span>plop_1</span><div class="button cryo-icon cryo-icon-download"</span></div>').html(),
		});
		tree.jqxTree('addTo', {
			html: $('<div><span>plop_2</span><div class="button cryo-icon cryo-icon-download"</span></div>').html(),
		});
		tree.jqxTree('addTo', {
			html: $('<div><span>plop_3</span><div class="button cryo-icon cryo-icon-download"</span></div>').html(),
		});
		
		tree.bind('select', function(event) {
			var position = $(event.args.element).offset();
			input.css({
				left: position.left,
				top: position.top + $(event.args.element).height(),
				zIndex: 1
			});
//			$('#log').jqxPanel('append', '<div style="white-space: nowrap">left=' + item.css('left') + '</div>');
//			$('#log').jqxPanel('append', '<div style="white-space: nowrap">top=' + item.css('top') + '</div>');
//			$('#log').jqxPanel('append', '<div style="white-space: nowrap">height=' + item.css('height') + '</div>');
			form.show();
			setTimeout(function() { input.focus(); }, 0);
		});
	});
	
	
</script>
</head>
<body class="default">
	<form id="myForm" action="#">
	<input id="myInput" style="position: absolute"></input>
	</form>
	<div id="tree">
	</div>
	<div id="log"></div>
</body>
</html>